{
  "version": "3.0.0",
  "metadata": {
    "id": "extension-rdbms",
    "name": "RDBMS Database Support",
    "kind": "extension",
    "type": "rdbms",
    "layers": [
      "backend"
    ],
    "description": "Adds database support for Spring (JPA) and Django (dj-database-url)",
    "version": "1.0.0",
    "author": "Genesis Team",
    "tags": [
      "rdbms",
      "database",
      "postgresql",
      "mysql"
    ],
    "providers": [
      "aws"
    ],
    "compatibleWith": [
      "spring",
      "drf"
    ],
    "springProfiles": [
      "database"
    ],
    "allowMultiple": true
  },
  "scaffoldConfigTemplate": [
    {
      "key": "databaseType",
      "label": "Database Type",
      "type": "select",
      "options": [
        "postgresql",
        "mysql",
        "mariadb",
        "h2"
      ],
      "default": "postgresql",
      "required": true,
      "description": "Database management system",
      "category": "database"
    },
    {
      "key": "jpaVersion",
      "label": "JPA Version",
      "type": "select",
      "options": [
        "3.1.0",
        "3.2.0"
      ],
      "default": "3.2.0",
      "required": true,
      "description": "JPA specification version (Spring only)",
      "category": "database",
      "forProvider": [
        "spring"
      ]
    },
    {
      "key": "connectionPoolSize",
      "label": "Connection Pool Size",
      "type": "number",
      "default": 20,
      "required": true,
      "description": "Maximum database connection pool size",
      "category": "performance"
    },
    {
      "key": "ddlAuto",
      "label": "DDL Auto Mode",
      "type": "select",
      "options": [
        "none",
        "validate",
        "update",
        "create-drop"
      ],
      "default": "validate",
      "required": true,
      "description": "Hibernate DDL auto mode (Spring only)",
      "category": "database",
      "forProvider": [
        "spring"
      ]
    }
  ],
  "dependencies": {
    "gradle": [
      "implementation 'org.springframework.boot:spring-boot-starter-data-jpa'",
      "implementation 'org.springframework.boot:spring-boot-starter-liquibase'",
      "implementation 'org.liquibase:liquibase-core'",
      "compileOnly 'org.projectlombok:lombok'",
      "annotationProcessor 'org.projectlombok:lombok'",
      "testRuntimeOnly 'com.h2database:h2'"
    ],
    "maven": [
      "<dependency><groupId>org.springframework.boot</groupId><artifactId>spring-boot-starter-data-jpa</artifactId></dependency>",
      "<dependency><groupId>org.springframework.boot</groupId><artifactId>spring-boot-starter-liquibase</artifactId></dependency>",
      "<dependency><groupId>org.liquibase</groupId><artifactId>liquibase-core</artifactId></dependency>",
      "<dependency><groupId>org.projectlombok</groupId><artifactId>lombok</artifactId><optional>true</optional></dependency>",
      "<dependency><groupId>com.h2database</groupId><artifactId>h2</artifactId><scope>test</scope></dependency>"
    ],
    "pip": [
      "dj-database-url==2.3.0",
      "psycopg2-binary==2.9.9"
    ]
  },
  "generation": {
    "files": {
      "remove": []
    },
    "layers": {
      "backend": {
        "conditionalDependencies": {
          "databaseDriver": {
            "condition": "databaseType !== ''",
            "gradle": {
              "postgresql": [
                "runtimeOnly 'org.postgresql:postgresql'"
              ],
              "mysql": [
                "runtimeOnly 'com.mysql:mysql-connector-j'"
              ],
              "mariadb": [
                "runtimeOnly 'org.mariadb.jdbc:mariadb-java-client'"
              ],
              "h2": [
                "runtimeOnly 'com.h2database:h2'"
              ]
            },
            "pip": {
              "postgresql": [
                "psycopg2-binary==2.9.9"
              ],
              "mysql": [
                "mysqlclient==2.2.4"
              ],
              "mariadb": [
                "mysqlclient==2.2.4"
              ]
            }
          }
        }
      }
    },
    "postProcess": [
      {
        "type": "chmod",
        "pattern": "**/start-local-db.sh",
        "mode": "+x"
      }
    ]
  },
  "gitignore": [
    "# Database",
    "*.db",
    "*.sqlite",
    "",
    "# Docker volumes",
    ".docker/",
    ""
  ]
}